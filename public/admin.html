<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم الإدارية - بوت اشتراكات واتساب</title>
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/dashboard.css">
    <meta name="description" content="لوحة تحكم إدارية لإدارة اشتراكات واتساب">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>لوحة التحكم</h2>
                <div class="user-info">
                    <span id="adminName">المدير</span>
                    <span id="adminRole">إداري</span>
                </div>
            </div>
            
            <ul class="sidebar-menu">
                <li class="menu-item active">
                    <a href="#dashboard" data-section="dashboard">
                        <i class="icon-dashboard"></i>
                        لوحة المعلومات
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#users" data-section="users">
                        <i class="icon-users"></i>
                        إدارة المستخدمين
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#subscriptions" data-section="subscriptions">
                        <i class="icon-subscriptions"></i>
                        إدارة الاشتراكات
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#payments" data-section="payments">
                        <i class="icon-payments"></i>
                        إدارة المدفوعات
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#whatsapp" data-section="whatsapp">
                        <i class="icon-whatsapp"></i>
                        إعدادات واتساب
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#settings" data-section="settings">
                        <i class="icon-settings"></i>
                        الإعدادات العامة
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <button id="logoutButton" class="logout-button">
                    <i class="icon-logout"></i>
                    تسجيل الخروج
                </button>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <div class="header-title">
                    <h1 id="sectionTitle">لوحة المعلومات</h1>
                    <p id="sectionDescription">مرحباً بك في لوحة التحكم الإدارية</p>
                </div>
                <div class="header-actions">
                    <button id="refreshButton" class="action-button">
                        <i class="icon-refresh"></i>
                        تحديث
                    </button>
                    <div class="notification-bell">
                        <i class="icon-bell"></i>
                        <span id="notificationCount" class="notification-count hidden">0</span>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon users-icon"></div>
                        <div class="stat-info">
                            <h3 id="totalUsers">0</h3>
                            <p>إجمالي المستخدمين</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon subscriptions-icon"></div>
                        <div class="stat-info">
                            <h3 id="activeSubscriptions">0</h3>
                            <p>الاشتراكات النشطة</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon revenue-icon"></div>
                        <div class="stat-info">
                            <h3 id="totalRevenue">$0</h3>
                            <p>إجمالي الإيرادات</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon messages-icon"></div>
                        <div class="stat-info">
                            <h3 id="messagesSent">0</h3>
                            <p>الرسائل المرسلة اليوم</p>
                        </div>
                    </div>
                </div>
                
                <div class="charts-section">
                    <div class="chart-card">
                        <h3>نمو المستخدمين</h3>
                        <div id="usersChart" class="chart-container"></div>
                    </div>
                    <div class="chart-card">
                        <h3>الإيرادات الشهرية</h3>
                        <div id="revenueChart" class="chart-container"></div>
                    </div>
                </div>
                
                <div class="recent-activity">
                    <h3>النشاط الأخير</h3>
                    <div id="activityList" class="activity-list"></div>
                </div>
            </section>
            
            <!-- Users Section -->
            <section id="users-section" class="content-section">
                <div class="section-toolbar">
                    <div class="search-box">
                        <input type="text" id="usersSearch" placeholder="البحث عن مستخدم...">
                        <i class="icon-search"></i>
                    </div>
                    <button id="addUserButton" class="primary-button">
                        <i class="icon-plus"></i>
                        إضافة مستخدم
                    </button>
                </div>
                
                <div class="table-container">
                    <table id="usersTable" class="data-table">
                        <thead>
                            <tr>
                                <th>الاسم</th>
                                <th>البريد الإلكتروني</th>
                                <th>رقم الواتساب</th>
                                <th>حالة الاشتراك</th>
                                <th>تاريخ التسجيل</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
                
                <div id="usersPagination" class="pagination"></div>
            </section>
            
            <!-- Subscriptions Section -->
            <section id="subscriptions-section" class="content-section">
                <div class="section-toolbar">
                    <div class="filter-group">
                        <select id="subscriptionStatusFilter">
                            <option value="">كل الحالات</option>
                            <option value="active">نشط</option>
                            <option value="expired">منتهي</option>
                            <option value="cancelled">ملغي</option>
                        </select>
                        <select id="subscriptionPlanFilter">
                            <option value="">كل الخطط</option>
                            <option value="basic">أساسية</option>
                            <option value="premium">مميزة</option>
                            <option value="enterprise">للشركات</option>
                        </select>
                    </div>
                    <button id="createPlanButton" class="primary-button">
                        <i class="icon-plus"></i>
                        إضافة خطة جديدة
                    </button>
                </div>
                
                <div class="table-container">
                    <table id="subscriptionsTable" class="data-table">
                        <thead>
                            <tr>
                                <th>المستخدم</th>
                                <th>الخطة</th>
                                <th>تاريخ البداية</th>
                                <th>تاريخ الانتهاء</th>
                                <th>الحالة</th>
                                <th>المبلغ</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="subscriptionsTableBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Payments Section -->
            <section id="payments-section" class="content-section">
                <div class="section-toolbar">
                    <div class="date-range">
                        <input type="date" id="startDate">
                        <input type="date" id="endDate">
                        <button id="filterPayments" class="secondary-button">تصفية</button>
                    </div>
                    <div class="export-actions">
                        <button id="exportPayments" class="secondary-button">
                            <i class="icon-download"></i>
                            تصدير
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="paymentsTable" class="data-table">
                        <thead>
                            <tr>
                                <th>رقم المعاملة</th>
                                <th>المستخدم</th>
                                <th>المبلغ</th>
                                <th>طريقة الدفع</th>
                                <th>الحالة</th>
                                <th>التاريخ</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="paymentsTableBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- WhatsApp Section -->
            <section id="whatsapp-section" class="content-section">
                <div class="whatsapp-config">
                    <h3>إعدادات واتساب API</h3>
                    <form id="whatsappConfigForm" class="config-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="whatsappToken">API Token</label>
                                <input type="password" id="whatsappToken" name="whatsappToken">
                            </div>
                            <div class="form-group">
                                <label for="whatsappPhoneId">Phone Number ID</label>
                                <input type="text" id="whatsappPhoneId" name="whatsappPhoneId">
                            </div>
                            <div class="form-group">
                                <label for="webhookUrl">Webhook URL</label>
                                <input type="url" id="webhookUrl" name="webhookUrl">
                            </div>
                            <div class="form-group">
                                <label for="verifyToken">Verify Token</label>
                                <input type="password" id="verifyToken" name="verifyToken">
                            </div>
                        </div>
                        <button type="submit" class="primary-button">حفظ الإعدادات</button>
                    </form>
                </div>
                
                <div class="whatsapp-status">
                    <h3>حالة الاتصال</h3>
                    <div id="connectionStatus" class="status-indicator">
                        <span class="status-dot"></span>
                        <span class="status-text">غير متصل</span>
                    </div>
                    <button id="testConnection" class="secondary-button">اختبار الاتصال</button>
                </div>
                
                <div class="message-templates">
                    <h3>قوالب الرسائل</h3>
                    <div id="templatesContainer" class="templates-grid"></div>
                    <button id="addTemplate" class="primary-button">
                        <i class="icon-plus"></i>
                        إضافة قالب
                    </button>
                </div>
            </section>
            
            <!-- Settings Section -->
            <section id="settings-section" class="content-section">
                <div class="settings-tabs">
                    <nav class="tabs-nav">
                        <button class="tab-button active" data-tab="general">عام</button>
                        <button class="tab-button" data-tab="security">الأمان</button>
                        <button class="tab-button" data-tab="notifications">الإشعارات</button>
                        <button class="tab-button" data-tab="backup">النسخ الاحتياطي</button>
                    </nav>
                    
                    <div class="tab-content">
                        <div id="general-tab" class="tab-panel active">
                            <form id="generalSettingsForm" class="settings-form">
                                <div class="form-group">
                                    <label for="siteName">اسم الموقع</label>
                                    <input type="text" id="siteName" name="siteName">
                                </div>
                                <div class="form-group">
                                    <label for="supportEmail">بريد الدعم</label>
                                    <input type="email" id="supportEmail" name="supportEmail">
                                </div>
                                <div class="form-group">
                                    <label for="currency">العملة</label>
                                    <select id="currency" name="currency">
                                        <option value="USD">دولار أمريكي</option>
                                        <option value="EUR">يورو</option>
                                        <option value="EGP">جنيه مصري</option>
                                        <option value="SAR">ريال سعودي</option>
                                    </select>
                                </div>
                                <button type="submit" class="primary-button">حفظ الإعدادات</button>
                            </form>
                        </div>
                        
                        <div id="security-tab" class="tab-panel">
                            <form id="securitySettingsForm" class="settings-form">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="twoFactorAuth">
                                        <span class="checkmark"></span>
                                        تفعيل المصادقة الثنائية
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="loginNotifications">
                                        <span class="checkmark"></span>
                                        إشعارات تسجيل الدخول
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="sessionTimeout">مهلة الجلسة (بالدقائق)</label>
                                    <input type="number" id="sessionTimeout" name="sessionTimeout" min="15" max="1440">
                                </div>
                                <button type="submit" class="primary-button">حفظ الإعدادات</button>
                            </form>
                        </div>
                        
                        <div id="notifications-tab" class="tab-panel">
                            <form id="notificationSettingsForm" class="settings-form">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="emailNotifications">
                                        <span class="checkmark"></span>
                                        الإشعارات عبر البريد الإلكتروني
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="smsNotifications">
                                        <span class="checkmark"></span>
                                        الإشعارات عبر الرسائل النصية
                                    </label>
                                </div>
                                <button type="submit" class="primary-button">حفظ الإعدادات</button>
                            </form>
                        </div>
                        
                        <div id="backup-tab" class="tab-panel">
                            <div class="backup-section">
                                <h4>النسخ الاحتياطي التلقائي</h4>
                                <form id="backupSettingsForm" class="settings-form">
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="autoBackup">
                                            <span class="checkmark"></span>
                                            تفعيل النسخ التلقائي
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label for="backupFrequency">تكرار النسخ</label>
                                        <select id="backupFrequency">
                                            <option value="daily">يومي</option>
                                            <option value="weekly">أسبوعي</option>
                                            <option value="monthly">شهري</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="primary-button">حفظ الإعدادات</button>
                                </form>
                                
                                <div class="backup-actions">
                                    <button id="createBackup" class="secondary-button">
                                        <i class="icon-backup"></i>
                                        إنشاء نسخة احتياطية
                                    </button>
                                    <button id="restoreBackup" class="secondary-button">
                                        <i class="icon-restore"></i>
                                        استعادة نسخة احتياطية
                                    </button>
                                </div>
                                
                                <div id="backupHistory" class="backup-history">
                                    <h4>سجل النسخ الاحتياطية</h4>
                                    <div id="backupList" class="backup-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Modals -->
    <div id="modalOverlay" class="modal-overlay hidden"></div>
    <div id="userModal" class="modal hidden"></div>
    <div id="subscriptionModal" class="modal hidden"></div>
    <div id="paymentModal" class="modal hidden"></div>
    <div id="templateModal" class="modal hidden"></div>
    
    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-indicator hidden">
        <div class="spinner"></div>
        <p>جاري التحميل...</p>
    </div>
    
    <!-- Scripts -->
    <script src="/js/common.js"></script>
    <script src="/js/admin.js"></script>
    <script src="/js/dashboard.js"></script>
    <script src="/js/modals.js"></script>
</body>
</html>