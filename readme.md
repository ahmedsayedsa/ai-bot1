# WhatsApp Bot Dashboard ูุน ุชูุงูู Easy Order

ุจูุช ูุงุชุณุงุจ ูุชูุงูู ูุน ููุญุฉ ุชุญูู ููุธุงู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุฏุนู webhooks ูู Easy Order.

## ๐ ุงูููุฒุงุช

### โ ุงูููุฒุงุช ุงูููุชููุฉ:
- **ุจูุช ูุงุชุณุงุจ ุดุบุงู** ุจุงุณุชุฎุฏุงู Baileys ููุชุตูู ุจู Firestore
- **ุนุฑุถ QR Code** ูู ุงูุณูุฑูุฑ ุจุฏูุงู ูู ุงูุชูุฑููุงู
- **ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู** ุนูุฏ ุงููุทุงุน ุงูุงุชุตุงู
- **ุฅุฏุงุฑุฉ ุดุงููุฉ ูููุณุชุฎุฏููู**:
  - API ูุฅุถุงูุฉ/ุชุญุฏูุซ ุงููุณุชุฎุฏููู
  - API ูุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
  - ุฏุนู ุงูุงุดุชุฑุงูุงุช ูุน ุชูุงุฑูุฎ ุงูุงูุชูุงุก
  - ุฑุณุงุฆู ุชุฑุญูุจ ูุฎุตุตุฉ ููู ูุณุชุฎุฏู
- **ูุงุฌูุงุช ููุจ ูุชูุงููุฉ**:
  - `/` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุน ุญุงูุฉ ุงูุจูุช ูุงูุฅุญุตุงุฆูุงุช
  - `/admin` - ููุญุฉ ุงูุฅุฏุงุฑุฉ ุงูุดุงููุฉ
  - `/user` - ุตูุญุฉ ุงููุณุชุฎุฏู ูุน ูุนูููุงุช ุงูุงุดุชุฑุงู ูุฅุญุตุงุฆูุงุช
- **Webhook ูู Easy Order** - ุงุณุชูุจุงู ููุนุงูุฌุฉ ุงูุทูุจุงุช ุชููุงุฆูุงู
- **ุฅุญุตุงุฆูุงุช ููุตูุฉ** - ุชุชุจุน ุงูุฑุณุงุฆู ูุงูุทูุจุงุช ูุงููุณุชุฎุฏููู
- **QR Code ุดุฎุตู** ููู ูุณุชุฎุฏู
- **API Key** ูุฎุตุต ููู ูุณุชุฎุฏู

### ๐ง ุฅุนุฏุงุฏุงุช ุงูุฅูุชุงุฌ:
- **ุฌุงูุฒ ูููุดุฑ ุนูู Google Cloud Run**
- **ูุฏุนู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ**
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู**

## ๐ ุงูุชุดุบูู

### ุงููุชุทูุจุงุช:
1. Node.js v16 ุฃู ุฃุญุฏุซ
2. ุญุณุงุจ Firebase ูุน Firestore
3. ููู `serviceAccountKey.json` ูู Firebase

### ุงูุชุซุจูุช:

```bash
# ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone <repository-url>
cd whatsapp-bot-dashboard

# ุชุซุจูุช ุงูุชุจุนูุงุช
npm install

# ุฅูุดุงุก ูุฌูุฏ public (ุฅุฐุง ูู ููู ููุฌูุฏุงู)
mkdir -p public

# ูุณุฎ ููู Firebase Service Account
# ุงุญุตู ุนูู ุงูููู ูู Firebase Console > Project Settings > Service Accounts
cp path/to/your/serviceAccountKey.json ./

# ุชุดุบูู ุงูุณูุฑูุฑ
npm start
```

### ุงูุชุดุบูู ูู ูุถุน ุงูุชุทููุฑ:

```bash
npm run dev
```

## ๐ ุงููุงุฌูุงุช

### ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`/`)
- ุนุฑุถ ุญุงูุฉ ุงูุจูุช (ูุชุตู/ุบูุฑ ูุชุตู)
- QR Code ููุงุชุตุงู ุจูุงุชุณุงุจ
- ุฅุญุตุงุฆูุงุช ุนุงูุฉ (ุงููุณุชุฎุฏูููุ ุงูุฑุณุงุฆูุ ุงูุทูุจุงุช)
- ุชุญุฏูุซ ุชููุงุฆู ูู 5 ุซูุงู

### ููุญุฉ ุงูุฅุฏุงุฑุฉ (`/admin`)
- **ุชุณุฌูู ุงูุฏุฎูู**: `admin` / `admin123` (ูุฑุฌู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ)
- ุฅุถุงูุฉ/ุชุญุฏูุซ ุงููุณุชุฎุฏููู
- ุชุญุฏูุฏ ูุฏุฉ ุงูุงุดุชุฑุงู ุจุงูุฃูุงู
- ุชุฎุตูุต ุฑุณุงุฆู ุงูุชุฑุญูุจ
- ุนุฑุถ ูุฅุฏุงุฑุฉ ุฌููุน ุงููุณุชุฎุฏููู
- ุฅุญุตุงุฆูุงุช ุดุงููุฉ
- ุงูุจุญุซ ูุงูุชุตููุฉ

### ุตูุญุฉ ุงููุณุชุฎุฏู (`/user`)
- **ุชุณุฌูู ุงูุฏุฎูู** ุจุฑูู ุงููุงุชู
- ุนุฑุถ ุญุงูุฉ ุงูุงุดุชุฑุงู ูุชุงุฑูุฎ ุงูุงูุชูุงุก
- ุฅุญุตุงุฆูุงุช ุดุฎุตูุฉ (ุงูุฑุณุงุฆู ุงููุฑุณูุฉุ ุงูุทูุจุงุช)
- **API Key** ู **Webhook URL** ูุฎุตุต
- **QR Code ุดุฎุตู** ูููุงุชุณุงุจ
- ุฅููุงููุฉ ุชุญููู ููุดุงุฑูุฉ QR Code

## ๐ API Endpoints

### ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
```bash
# ุฅุถุงูุฉ/ุชุญุฏูุซ ูุณุชุฎุฏู
POST /api/users
{
  "phoneNumber": "966501234567",
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "status": "active",
  "daysToAdd": 30,
  "welcomeMessage": "ูุฑุญุจุงู ุจู! ๐"
}

# ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
GET /api/users

# ุนุฑุถ ูุณุชุฎุฏู ูุญุฏุฏ
GET /api/user/966501234567

# ุญุฐู ูุณุชุฎุฏู
DELETE /api/users/966501234567

# ุชุญุฏูุซ ุฑุณุงูุฉ ุงูุชุฑุญูุจ
POST /api/template
{
  "phoneNumber": "966501234567",
  "welcomeMessage": "ุฑุณุงูุฉ ุฌุฏูุฏุฉ"
}
```

### ุญุงูุฉ ุงูุจูุช ูุงูุฅุญุตุงุฆูุงุช
```bash
# ุญุงูุฉ ุงูุจูุช
GET /api/status

# ุงูุฅุญุตุงุฆูุงุช ุงูุนุงูุฉ
GET /api/stats

# ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู
POST /api/user/login
{
  "phoneNumber": "966501234567"
}
```

### Webhook ูู Easy Order
```bash
# ุงุณุชูุจุงู ุทูุจ ูู Easy Order
POST /webhook/easyorder/{API_KEY}
{
  "customerName": "ูุญูุฏ ุฃุญูุฏ",
  "customerPhone": "966501234567",
  "totalAmount": "150.00",
  "orderItems": [...],
  "notes": "ููุงุญุธุงุช ุฅุถุงููุฉ"
}
```

## ๐ง ุฅุนุฏุงุฏ Firebase

1. ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ ูู [Firebase Console](https://console.firebase.google.com)
2. ุชูุนูู Firestore Database
3. ุฅูุดุงุก Service Account:
   - ุงุฐูุจ ุฅูู Project Settings > Service Accounts
   - ุงููุฑ ุนูู "Generate new private key"
   - ุงุญูุธ ุงูููู ุจุงุณู `serviceAccountKey.json`
4. ุถุจุท ููุงุนุฏ Firestore:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```

## ๐ ุงููุดุฑ ุนูู Google Cloud Run

### ุฅุนุฏุงุฏ Google Cloud SDK:
```bash
# ุชุณุฌูู ุงูุฏุฎูู
gcloud auth login

# ุชุญุฏูุฏ ุงููุดุฑูุน
gcloud config set project YOUR_PROJECT_ID

# ุชูุนูู ุงูุฎุฏูุงุช ุงููุทููุจุฉ
gcloud services enable run.googleapis.com
gcloud services enable cloudbuild.googleapis.com
```

### ุงููุดุฑ:
```bash
# ุจูุงุก ููุดุฑ ุงูุชุทุจูู
gcloud run deploy whatsapp-bot \
  --source . \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --port 8080 \
  --memory 1Gi \
  --cpu 1 \
  --min-instances 1 \
  --max-instances 10

# ุฃู ุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงููุฎุชุตุฑ
npm run deploy
```

### ูุฑุงูุจุฉ ุงูุชุทุจูู:
```bash
# ุนุฑุถ ุงูููุฌุฒ
gcloud run logs tail --service=whatsapp-bot

# ุฃู
npm run logs
```

## ๐ ูููู ุงููุดุฑูุน

```
whatsapp-bot-dashboard/
โโโ server.js                 # ุงูููู ุงูุฑุฆูุณู ููุณูุฑูุฑ
โโโ package.json              # ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน ูุงูุชุจุนูุงุช
โโโ app.yaml                  # ุฅุนุฏุงุฏุงุช Google App Engine
โโโ serviceAccountKey.json    # ููุชุงุญ Firebase (ูุง ูุฌุจ ุฑูุนู ูู Git)
โโโ public/                   # ูููุงุช ุงููุงุฌูุฉ
โ   โโโ index.html           # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โ   โโโ admin.html           # ููุญุฉ ุงูุฅุฏุงุฑุฉ
โ   โโโ user.html            # ุตูุญุฉ ุงููุณุชุฎุฏู
โโโ auth_info_baileys/        # ูููุงุช ุงููุตุงุฏูุฉ ููุงุชุณุงุจ
โโโ README.md                 # ูุฐุง ุงูููู
```

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช (Firestore)

### ูุฌููุนุฉ `users`:
```javascript
{
  "966501234567": {
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "phoneNumber": "966501234567",
    "status": "active",
    "endDate": "2024-02-15T10:30:00Z",
    "createdAt": "2024-01-15T10:30:00Z",
    "welcomeMessage": "ูุฑุญุจุงู ุจู! ๐",
    "messageCount": 25,
    "totalOrders": 5,
    "apiKey": "abc123...",
    "lastMessageDate": "2024-01-20T14:30:00Z"
  }
}
```

### ูุฌููุนุฉ `orders`:
```javascript
{
  "order_1705123456789": {
    "userId": "966501234567",
    "customerName": "ูุญูุฏ ุฃุญูุฏ",
    "customerPhone": "966509876543",
    "totalAmount": "150.00",
    "orderItems": [...],
    "status": "received",
    "createdAt": "2024-01-15T10:30:00Z"
  }
}
```

### ูุฌููุนุฉ `botStats`:
```javascript
{
  "general": {
    "lastConnection": "2024-01-15T10:30:00Z",
    "totalConnections": 15,
    "totalMessages": 1250,
    "status": "online"
  }
}
```

## ๐๏ธ ุงูุชุฎุตูุต ูุงูุชุทููุฑ

### ุชุบููุฑ ุจูุงูุงุช ุงูุฅุฏุงุฑุฉ:
ูู ููู `admin.html`ุ ุบููุฑ ุงููุชุบูุฑุงุช:
```javascript
const ADMIN_USERNAME = 'your_username';
const ADMIN_PASSWORD = 'your_secure_password';
```

### ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ:
1. ุฃุถู ุงูู API endpoints ุงูุฌุฏูุฏุฉ ูู `server.js`
2. ุฃูุดุฆ ุงููุงุฌูุงุช ุงููุทููุจุฉ ูู ูุฌูุฏ `public/`
3. ุญุฏูุซ ููุงุนุฏ ุงูุจูุงูุงุช ูู Firestore ุญุณุจ ุงูุญุงุฌุฉ

### ุฏูุฌ ูุน ุฃูุธูุฉ ุฃุฎุฑู:
ููููู ุฅุถุงูุฉ webhooks ุฅุถุงููุฉ ูุฃูุธูุฉ ุฃุฎุฑู:
```javascript
app.post('/webhook/custom/:apiKey', async (req, res) => {
  // ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุฎุตุตุฉ
});
```

## ๐ ุงูุฃูุงู

- **ูุง ุชุฑูุน** ููู `serviceAccountKey.json` ุฅูู Git
- **ุบููุฑ ุจูุงูุงุช ุงูุฅุฏุงุฑุฉ** ุงูุงูุชุฑุงุถูุฉ
- **ุงุณุชุฎุฏู HTTPS** ูู ุงูุฅูุชุงุฌ
- **ุฑุงุฌุน ููุงุนุฏ Firestore** ูุชูููุฏ ุงููุตูู ุญุณุจ ุงูุญุงุฌุฉ

## ๐ ูุงุฆูุฉ ุงูููุงู

### โ ููุชูู:
- [x] ุฅุนุฏุงุฏ ุจูุช ูุงุชุณุงุจ ูุน Baileys
- [x] ุงุชุตุงู ุจู Firestore
- [x] ุนุฑุถ QR Code ูู ุงูุณูุฑูุฑ
- [x] ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู
- [x] ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุงุดุชุฑุงูุงุช
- [x] ูุงุฌูุงุช ุงูููุจ ุงูุซูุงุซ
- [x] Webhook ูู Easy Order
- [x] ุฅุญุตุงุฆูุงุช ุดุงููุฉ
- [x] QR Code ุดุฎุตู ูููุณุชุฎุฏููู
- [x] API Key ูุฎุตุต ููู ูุณุชุฎุฏู

### ๐ ุชุญุช ุงูุชุทููุฑ:
- [ ] ูุธุงู ุฅุดุนุงุฑุงุช ูุชูุฏู
- [ ] ุฏุนู ุงูุฑุณุงุฆู ุงููุณุงุฆุทูุฉ
- [ ] ูุธุงู ุงูููุงูุจ ุงููุชูุฏู
- [ ] ุชูุงุฑูุฑ ููุตูุฉ
- [ ] ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:

1. **ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุชุณุงุจ**:
   - ุชุฃูุฏ ูู ุฅุฌุฑุงุก ุงููุณุญ ุงูุณุฑูุน ููู QR Code
   - ุงุญุฐู ูุฌูุฏ `auth_info_baileys` ูุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ

2. **ุฎุทุฃ ูู Firebase**:
   - ุชุฃูุฏ ูู ุตุญุฉ ููู `serviceAccountKey.json`
   - ุฑุงุฌุน ููุงุนุฏ Firestore

3. **ูุดุงูู ูู ุงููุดุฑ**:
   - ุชุฃูุฏ ูู ุชูุนูู ุฎุฏูุงุช Google Cloud ุงููุทููุจุฉ
   - ุฑุงุฌุน ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน ูู `app.yaml`

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูู ุญุงูุฉ ูุงุฌูุช ุฃู ูุดุงูู:
1. ุฑุงุฌุน ุงูููุฌุฒ: `npm run logs`
2. ุชุฃูุฏ ูู ุณูุงูุฉ ุฅุนุฏุงุฏุงุช Firebase
3. ุฑุงุฌุน ุญุงูุฉ ุงูุงุชุตุงู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

---

**ูุทูุฑ ุงููุดุฑูุน**: [Your Name]  
**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ**: ููุงูุฑ 2024  
**ุงููุณุฎุฉ**: 1.0.0